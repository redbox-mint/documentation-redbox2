<!DOCTYPE html>






<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->
<head>
    <title>Installation on Docker | ReDBox Documentation</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="favicon.ico">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- Global CSS -->
    <link rel="stylesheet" href="../assets/plugins/bootstrap/css/bootstrap.min.css">
    <!-- Plugins CSS -->
    <link rel="stylesheet" href="../assets/plugins/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="../assets/plugins/prism/prism.css">
    <link rel="stylesheet" href="../assets/plugins/elegant_font/css/style.css">

    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="../assets/css/styles.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    <div class="page-wrapper">
        <!-- ******Header****** -->
        <header id="header" class="header">
            <div class="container">
                <div class="branding">
                    <h1 class="logo">
                        <a href="../index.html">
                            <img aria-hidden="true" style="height: 80px;" src="https://www.redboxresearchdata.com.au/images/RedBox_Logo_Box_Small.png"></img>
                        </a>
                    </h1>
                </div><!--//branding-->
                <ol class="breadcrumb">
                    <li><a href="../index.html">Home</a></li>
                    <li class="active">Installation</li>
                    <li><a href="../siteAdminDocumentation/introduction.html">For site admins</a></li>
                    <li><a href="../sysAdminDocumentation/introduction.html">For sys admins</a></li>

                </ol>
            </div><!--//container-->
        </header><!--//header-->
        <div class="doc-wrapper">
            <div class="container">
                <div id="doc-header" class="doc-header text-center">
                    <h1 class="doc-title"><i class="icon fa fa-fas fa-info-circle"></i> Installation on Docker</h1>
                    <div class="meta"><i class="fa fa-clock-o"></i> Last updated: <b>November 6th 2018</b></div>
                </div><!--//doc-header-->
                <div class="doc-body">
                    <div class="doc-content">
                        <div class="content-inner">

                            <h2 id="prerequisites">Prerequisites</h2>
<p>The ReDBox stack can be run using <a href="https://www.docker.com/">Docker</a> containers. There are images published on Docker Hub for all the required components in the stack:</p>
<ul>
<li><a href="https://hub.docker.com/r/qcifengineering/redbox-portal/">ReDBox Portal</a></li>
<li><a href="https://hub.docker.com/r/qcifengineering/redbox/">ReDBox Storage</a></li>
<li><a href="https://hub.docker.com/r/mvertes/alpine-mongo/">MongoDB</a></li>
</ul>
<p>As well as some optional components:</p>
<ul>
<li><a href="https://hub.docker.com/r/qcifengineering/mint/">Mint</a></li>
<li><a href="https://hub.docker.com/r/nginx/">Nginx</a></li>
</ul>
<p>This installation guide uses the Docker Compose tool. For instructions on how to install docker-compose are <a href="https://docs.docker.com/compose/install/">available from Docker</a></p>
<h2 id="installation">Installation</h2>
<ol>
<li>Set up a <a href="https://docs.docker.com/compose/compose-file/">Compose file (docker-compose.yml)</a>. Here&#39;s an example but you may wish to customise parts of it to your needs including mounting volumes (See the <a href="https://docs.docker.com/compose/compose-file/">reference</a> for more information)</li>
</ol>
<p>Note: copying the example below won&#39;t preserve indentation as required, if you&#39;d like to copy it please use the version <a href="https://raw.githubusercontent.com/redbox-mint/redbox-portal/master/support/deployment-examples/docker/docker-compose.yml">here</a></p>
<pre><code>version: &#39;3.1&#39;
networks:
    main:
services:
    redboxportal:
        image: &#39;qcifengineering/redbox-portal:latest&#39;
        ports:
            - &#39;80:80&#39;
        restart: always
        expose:
            - &#39;80&#39;
        environment:
            - NODE_ENV=docker
            - PORT=80
            - sails_redbox__apiKey=xxxx-xxxx-xxxx
            - sails_record__baseUrl_redbox=http://redbox:9000/redbox
            - sails_appUrl=http://localhost
        networks:
            main:
                aliases: [rbportal]
        entrypoint: &#39;/bin/bash -c &quot;cd /opt/redbox-portal &amp;&amp; node app.js&quot;&#39;
    redbox:
        image: &#39;qcifengineering/redbox:2.x&#39;
        expose:
            - &#39;9000&#39;
        environment:
            - RB_API_KEY=xxxx-xxxx-xxxx
        networks:
            main:
                aliases: [redbox]
        ports:
            - &#39;9000:9000&#39;
    mongodb:
        image: &#39;mvertes/alpine-mongo:latest&#39;
        networks:
            main:
                aliases: [mongodb]
        ports:
            - &#39;27017:27017&#39;</code></pre><p>The environment variables <code>sails_redbox__apiKey</code> and <code>RB_API_KEY</code> should be set the same and is the API key the portal uses on API requests to storage.</p>
<p>If you are not running this on your local machine, set the <code>sails_appUrl</code> to the URL of the server it is running on.</p>
<ol start="2">
<li>Once the docker-compose.yml has been created, you can bring up the stack by running <code>docker-compose up</code>. See the <a href="https://docs.docker.com/compose/reference/">Docker Compose command-line reference</a> for other options.</li>
</ol>



                        </div><!--//content-inner-->
                    </div><!--//doc-content-->
                    <div class="doc-sidebar hidden-xs">
                        <nav id="doc-nav">
                            <ul id="doc-menu" class="nav doc-menu" data-spy="affix">
                              
                              

                              <li class="inactive">
                                  <a href="http://redbox-mint.github.io/documentation-redbox2/installationDocumentation/introduction.html">
                                      Introduction
                                  </a>

                                  
                              </li>
                              
                              
                              

                              <li class="inactive">
                                  <a href="http://redbox-mint.github.io/documentation-redbox2/installationDocumentation/ubuntuInstallation.html">
                                      Installation on Ubuntu
                                  </a>

                                  
                              </li>
                              
                              
                              

                              <li class="inactive">
                                  <a href="http://redbox-mint.github.io/documentation-redbox2/installationDocumentation/centosInstallation.html">
                                      Installation on CentOS
                                  </a>

                                  
                              </li>
                              
                              
                              

                              <li class="active">
                                  <a href="http://redbox-mint.github.io/documentation-redbox2/installationDocumentation/dockerInstallation.html">
                                      Installation on Docker
                                  </a>

                                  
                              </li>
                              
                              
                            </ul><!--//doc-menu-->
                        </nav>
                    </div><!--//doc-sidebar-->
                </div><!--//doc-body-->
            </div><!--//container-->
        </div><!--//doc-wrapper-->

    </div><!--//page-wrapper-->

    <footer id="footer" class="footer text-center">
        <div class="container">
            <!--/* This template is released under the Creative Commons Attribution 3.0 License. Please keep the attribution link below when using for your own project. Thank you for your support. :) If you'd like to use the template without the attribution, you can check out other license options via our website: themes.3rdwavemedia.com */-->
            <small class="copyright">Designed with <i class="fa fa-heart"></i> by <a href="http://themes.3rdwavemedia.com/" targe="_blank">Xiaoying Riley</a> for developers</small>
        </div><!--//container-->
    </footer><!--//footer-->


    <!-- Main Javascript -->
    <script type="text/javascript" src="../assets/plugins/jquery-1.12.3.min.js"></script>
    <script type="text/javascript" src="../assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../assets/plugins/prism/prism.js"></script>
    <script type="text/javascript" src="../assets/plugins/jquery-scrollTo/jquery.scrollTo.min.js"></script>
    <script type="text/javascript" src="../assets/plugins/jquery-match-height/jquery.matchHeight-min.js"></script>
    <script type="text/javascript" src="../assets/js/main.js"></script>
    <script>
      $(document).ready(function() {
        $(".doc-body").css("min-height", $("#doc-menu").outerHeight()+"px");
      });
    </script>
</body>
</html>